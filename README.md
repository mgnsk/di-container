## DI container for Go

Another Go DI container with optional init code generator.

Installation: `go install github.com/mgnsk/di-container/cmd/initgen`

### Example

Given an `initgen.go` file:
```
//go:generate initgen

package example

import (
	"github.com/mgnsk/di-container/di"
	"github.com/mgnsk/di-container/example/constants"
)

// Generate registers a container for code generation.
func Generate() {
	di.Generate(func(c *di.Container) {
		c.Register(new(Greeter), NewMyGreeter)
		c.Register(MySentence(""), NewMySentence)
		c.Register(constants.MyMultiplier(0), constants.NewMyMultiplier)
		c.Register(&MyService{}, MyServiceProvider)
		c.Register(constants.MyInt(0), constants.NewMyInt)
	})
}
```

It generates the following code:
```
// DO NOT EDIT. This code is generated by initgen.
package example

import "github.com/mgnsk/di-container/example/constants"

func initMyInt() constants.MyInt {
	myint := constants.NewMyInt()
	return myint
}
func initMyMultiplier() constants.MyMultiplier {
	mymultiplier := constants.NewMyMultiplier()
	return mymultiplier
}
func initMySentence() MySentence {
	myint := initMyInt()
	mymultiplier := initMyMultiplier()
	mysentence := NewMySentence(myint, mymultiplier)
	return mysentence
}
func initGreeter() Greeter {
	mysentence := initMySentence()
	greeter, err := NewMyGreeter(mysentence)
	if err != nil {
		panic(err)
	}
	return greeter
}
func initMyService() *MyService {
	greeter := initGreeter()
	mymultiplier := initMyMultiplier()
	myservice, err := MyServiceProvider(greeter, mymultiplier)
	if err != nil {
		panic(err)
	}
	return myservice
}
```

It is possible to use the container on runtime. See the tests in `container`.


Example shown in `example` dir. In general: install `initgen` binary, create an `initgen.go` file in the package and run `go generate ./...`.

Documentation in progress


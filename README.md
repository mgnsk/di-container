## DI container for Go

Another Go DI container with optional init code generator.

Installation: `go install github.com/mgnsk/di-container/cmd/initgen`

### Example

Given an `initgen.go` fil which registers unique dependencies and providers in that package:
```
//go:generate initgen

package example

import (
	"github.com/mgnsk/di-container/di"
	"github.com/mgnsk/di-container/example/constants"
	"github.com/mgnsk/di-container/initgen"
)

// Generate registers a container for code generation.
func Generate() {
	initgen.Generate(func(c *di.Container) {
		c.Register(new(greeter), newMyGreeter)
		c.Register(mySentence(""), newMySentence)
		c.Register(constants.MyMultiplier(0), constants.NewMyMultiplier)
		c.Register(&myService{}, myServiceProvider)
		c.Register(constants.MyInt(0), constants.NewMyInt)
	})
}
```

It generates the following code:
```
// DO NOT EDIT. This code is generated by initgen.
package example

import (
	"github.com/mgnsk/di-container/example/constants"
)

func InitMyInt() constants.MyInt {
	myint := constants.NewMyInt()
	return myint
}

func InitMyMultiplier() constants.MyMultiplier {
	mymultiplier := constants.NewMyMultiplier()
	return mymultiplier
}

func InitMySentence() mySentence {
	myint := InitMyInt()
	mymultiplier := InitMyMultiplier()
	mysentence := newMySentence(myint, mymultiplier)
	return mysentence
}

func InitGreeter() greeter {
	mysentence := InitMySentence()
	greeter, err := newMyGreeter(mysentence)
	if err != nil {
		panic(err)
	}
	return greeter
}

func InitMyService() *myService {
	greeter := InitGreeter()
	mymultiplier := InitMyMultiplier()
	myservice, err := myServiceProvider(greeter, mymultiplier)
	if err != nil {
		panic(err)
	}
	return myservice
}

```

It is possible to use the container on runtime. See the tests in `container`.

It reports errors when a type is missing a provider function.
```
go generate -x ./...
initgen
panic: Missing provider for type 'constants.MyInt'
...
```



Example shown in `example` dir. In general: install `initgen` binary, create an `initgen.go` file in the package and run `go generate ./...` and 
`go run example/cmd/main.go`

Documentation and design in progress
